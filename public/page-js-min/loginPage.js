const apiHost=window.location.hostname,apiPort=window.location.port,host=`http://${apiHost}:${apiPort}/api/console/v1/`,pageHost=`http://${apiHost}:${apiPort}/`;var Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});function getQueryParamValue(e){var o=window.location.href;return new URL(o).searchParams.get(e)}function login(e){event.preventDefault(),generateToken()}function getProfile(){var e={Authorization:"Bearer "+localStorage.getItem("bearer")};$.ajax({url:host+"profile",type:"GET",dataType:"json",headers:e,success:function(e){window.location.href=pageHost+"inventory"},error:function(e,o,t){}})}function generateToken(){$.ajax({url:host+"login",type:"POST",dataType:"json",data:$("#loginCred").serializeArray(),success:function(e){var o=getQueryParamValue("from-path");localStorage.setItem("bearer",e.token),Toast.fire({icon:"success",title:"Login berhasil",timer:1500}),setTimeout((function(){window.location.href=pageHost+(o?decodeURIComponent(o).substring(1):"")}),2e3)},error:function(e,o,t){Toast.fire({icon:"error",title:JSON.parse(e.responseText).message}),$("#loginCred")[0].reset(),console.error(JSON.parse(e.responseText).message)}})}$(document).ready((function(){getProfile()}));
